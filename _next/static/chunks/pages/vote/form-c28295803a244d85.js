(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2211],{7445:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/form",function(){return n(72697)}])},54779:function(t,e){"use strict";e.Z=[{inputs:[{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"imgUrl",type:"string"}],name:"createPoll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllPollResults",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"yesCount",type:"uint256"},{internalType:"uint256",name:"noCount",type:"uint256"},{internalType:"string",name:"imgUrl",type:"string"}],internalType:"struct Voting.pollsListObj[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pollIndex",type:"uint256"}],name:"getPollResults",outputs:[{internalType:"uint256",name:"yes",type:"uint256"},{internalType:"uint256",name:"no",type:"uint256"},{internalType:"uint256",name:"CurrentIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPollsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"polls",outputs:[{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"imgUrl",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pollIndex",type:"uint256"},{internalType:"bool",name:"choice",type:"bool"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}]},72697:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var i=n(85893),a=n(67294),s=n(41027),l=n(11993),u=n(38711),o=n(87740),p=n(86597),r=n(22311),c=n(96476),y=n(1300),m=n(54779);function d(t){let{open:e,setVoteFormOpen:n,dispatchContract:d,isPending:g,isConfirming:f,isConfirmed:b}=t,{isOpen:x,onOpen:h,onOpenChange:T,onClose:j}=(0,s.q)(),[C,_]=(0,a.useState)(""),[w,N]=(0,a.useState)("");return(0,a.useEffect)(()=>{e&&h(),b&&e&&n(!1),console.log(b,"isConfirmed")},[e,b]),(0,i.jsx)("div",{children:(0,i.jsx)(l.R,{backdrop:"opaque",isOpen:x,hideCloseButton:f||g,isDismissable:!1,onOpenChange:T,onClose:()=>{n(!1),j()},classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},children:(0,i.jsx)(u.A,{children:t=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.k,{className:"flex flex-col gap-1",children:"创建投票"}),(0,i.jsxs)(p.I,{children:[(0,i.jsx)(r.Y,{type:"text",label:"投票名称",onValueChange:t=>{_(t)}}),(0,i.jsx)(r.Y,{type:"text",label:"投票图片链接",placeholder:"如果图片未加载出来说明地址防盗链,自动替换占位图",onValueChange:t=>{N(t)}})]}),(0,i.jsx)(c.R,{className:"justify-center",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(y.A,{isLoading:g||f,className:"w-unit-7xl mb-3",color:"primary",onPress:()=>{d({abi:m.Z,address:"0x0d77736F42EF631771550Ec616D202c4dc2A530B",functionName:"createPoll",args:[C,w]})},children:g||f?"交易确认中...":"确认创建"})})})]})})})})}}},function(t){t.O(0,[9629,2888,9774,179],function(){return t(t.s=7445)}),_N_E=t.O()}]);